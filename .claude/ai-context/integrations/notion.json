{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "version": "1.0.0",
  "integration": {
    "name": "Notion",
    "type": "external_api",
    "description": "Collect context from Notion pages/databases"
  },
  "config": {
    "token": {
      "env": "NOTION_API_KEY"
    },
    "api_version": "2022-06-28"
  },
  "operations": {
    "get_page": {
      "description": "Get page content",
      "api": "pages/{page_id}",
      "method": "GET"
    },
    "get_blocks": {
      "description": "Get page block content",
      "api": "blocks/{block_id}/children",
      "method": "GET"
    },
    "search": {
      "description": "Search workspace",
      "api": "search",
      "method": "POST",
      "params": ["query", "filter", "sort"]
    }
  },
  "context_extraction": {
    "source": "notion",
    "source_id_format": "{page_id}",
    "content_format": "Concatenated block text"
  },
  "future_storage": {
    "description": "Future migration to Notion DB as primary storage possible",
    "migration_path": [
      "Keep repositories/ interface",
      "Add storage/notion/ implementation",
      "Swap implementation via DI"
    ]
  },
  "sync_api": {
    "endpoint": "/api/sync/notion",
    "methods": {
      "GET": {
        "description": "Search pages",
        "params": "query"
      },
      "POST": {
        "description": "Sync page to Context",
        "params": "pageId"
      }
    }
  }
}
